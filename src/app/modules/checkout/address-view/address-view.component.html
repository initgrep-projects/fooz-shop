<div class="app-address-view"
     *ngIf="addService.addresses$ |async as addresses; else loading">
    <div class="address-view-header">
        <div class="card">
            <div class="card-body">
                <div class="head-wrapper">
                    <h6>select shipping Address </h6>
                    <a class="btn btn-sm btn-light"
                       [routerLink]="['/account/addresses/new']">
                        <fa-icon icon="plus"></fa-icon>
                        <span>{{labels.addAddress}}</span>
                    </a>
                </div>
            </div>
        </div>
        <app-alert *ngIf="profileService.isInvalidProfile$ | async as validProf"
                   [config]="validProf"
                   (controlClick)="updateProfile()"></app-alert>

    </div>
    <div class="address-view-body">
        <div class=" selected-ad-wrapper py-2"
             *ngIf="addService.selectedAddress$ | async as selectedAddress">
            <label>Selected address</label>
            <app-user-address [address]="selectedAddress"
                              [enableEdit]="true"
                              [enableSelect]="true"
                              [isSelected]="true"></app-user-address>
        </div>

        <div class=" other-ad-wrapper py-2"
             *ngIf="addresses.length !== 0 && !(addresses.length === 1 && addresses[0].IsSelected)">
            <label>Other address</label>
            <div *ngFor="let address of addresses">

                <app-user-address *ngIf="!address.IsSelected"
                                  [address]="address"
                                  [enableEdit]="true"
                                  [enableSelect]="true"
                                  [isSelected]="address.IsSelected"
                                  (select)="updateAddressSelection(address)"></app-user-address>
            </div>


        </div>
        <div class="no-ad-wrapper"  *ngIf="addresses.length === 0">
            <div class="alert bg-light app-addresses-alert text-center"
            *ngIf="addresses.length === 0">{{labels.NoAddressesPresent}}</div>
        </div>
    </div>
    <div class="address-view-footer" *ngIf="addresses.length > 0">
        <div class="address-view-controls">
            <button class="btn btn-dark m-2"
                    [disabled]="!(addService.selectedAddress$ | async)"
                    (click)="routeToPayment()">CONTINUE</button>
        </div>
    </div>
</div>

<ng-template #loading>
    <div class="text-center">
        <div class="spinner-border text-secondary"
             role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</ng-template>